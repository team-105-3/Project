<!DOCTYPE html>
<html>
    <head>
        <title>My Calendar</title>

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
        
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
        
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>

        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet"/>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.css" rel="stylesheet"/>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js" ></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="../js/util.js"></script>
        <script src="../js/user/events.js"></script>
        <script src="../js/user/projects.js"></script>
        <script src="../js/calendar.js"></script>
        <script src="../js/user/user.js"></script>
    </head>
    <body>
        <div class="containter">
            <p>Welcome to your smartcal homepage.</p>

            <div class="modal" tabindex="-1" role="dialog" id="loading">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="lds-grid"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!--Create Event button-->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createEventModal" id="createEvent">
                Create Event
            </button>
    
            <!--Create Project-->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createProjectModal" id="createProject">
                Create Project
            </button>
            
            <!--Event Creation Modal-->
            <div class="modal fade" id="createEventModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Create Event</h5>
                        </div>
    
                        <!--Create Event Form-->
                        <div class="modal-body">
                            <!--Title-->
                            <div class="form-group">
                                <input type="text" class="form-control entry" id="e_title" placeholder="Event Title">
                            </div>
    
                            <!--Time-->
                            <div class="row">
                                <div class='col-sm-6'>
                                    <div class="form-group">
                                        <label for="e_start_time">Start Time</label>
                                        <div class='input-group date' id='datetimepicker1'>
                                            <input id="est" type='text' class="form-control entry" id="e_start_time"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-time"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#datetimepicker1').datetimepicker({
                                            format: 'LT'
                                        });
                                    });
                                </script>
                                <div class='col-sm-6'>
                                    <div class="form-group">
                                        <label for="e_end_time">End Time</label>
                                        <div class='input-group date' id='datetimepicker2'>
                                            <input id="eet" type='text' class="form-control entry" id="e_end_time"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-time"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#datetimepicker2').datetimepicker({
                                            format: 'LT'
                                        });
                                    });
                                </script>
                            </div>
    
                            <!--Recurring-->
                            <div class="form-check">
                                <div class="row">
                                    <div class="col col-sm-4">
                                        <label for="recurring"> Recurring Event </label>
                                    </div>
                                    <div class="col col-sm-1">
                                        <input class="form-check-input entry" type="checkbox" value="" id="recurring">
                                    </div>
                                </div>
                            </div>
    
                            <!--Date Input-->
                            <div class="row">
                                <div class='col-md-6'>
                                    <div class="form-group">
                                        <label for="e_start_date">Start Date</label>
                                        <div class='input-group date' id='e_start_date'>
                                            <input id="esd" type='text' class="form-control entry" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-md-6'>
                                    <div class="form-group">
                                        <label for="e_end_date">End Date</label>
                                        <div class='input-group date' id='e_end_date'>
                                            <input disabled id="ed" type='text' class="form-control entry" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    document.getElementById('recurring').onchange = function() {
                                        document.getElementById('ed').disabled = !this.checked;
                                    };
                                </script>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#e_start_date').datetimepicker({
                                            format: "MM/DD/YYYY"
                                        });
                                        $('#e_end_date').datetimepicker({
                                            format: "MM/DD/YYYY",
                                            useCurrent: false //Important! See issue #1075
                                        });
                                        $("#e_start_date").on("dp.change", function (e) {
                                            $('#e_end_date').data("DateTimePicker").minDate(e.date);
                                        });
                                        $("#e_end_date").on("dp.change", function (e) {
                                            $('#e_start_date').data("DateTimePicker").maxDate(e.date);
                                        });
                                    });
                                </script>
                            </div>
                            
                            <div class="row">
                                <div class="col">
                                    <label for="rec">Recurrence</label>
                                    <select disabled class="custom-select mr-sm-2" id="rec">
                                        <option selected>Choose...</option>
                                        <option value="1">Every</option>
                                        <option value="2">Every Other</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <label class="mr-sm-2" for="timeframe">Timeframe</label>
                                    <select disabled class="custom-select mr-sm-2 my-1" id="timeframe">
                                        <option selected>Choose...</option>
                                        <option value="1">Day</option>
                                        <option value="2">Week</option>
                                        <option value="3">Month</option>
                                        <option value="4">Year</option>
                                    </select>
                                </div>
                                <script>
                                    document.getElementById('recurring').onchange = function() {
                                        document.getElementById('rec').disabled = !this.checked;
                                        document.getElementById('timeframe').disabled = !this.checked;
                                    };
                                </script>
                            </div>
                            <br>
                            
                            <!--Description-->
                            <div class="form-group">
                                <label for="e_desc">Event Description</label>
                                <textarea class="form-control entry" id="e_desc" rows="3"></textarea>
                            </div>
                        </div>
    
                        <!--Cancel and submit buttons-->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearAllEntries()">Cancel</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="createCalendarEvent()">Create Event</button>
                        </div>
                    </div>
                </div>
            </div>

            <!--Project Creation Modal-->
            <div class="modal fade" id="createProjectModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Create Project</h5>
                        </div>
    
                        <!--Create Event Form-->
                        <div class="modal-body">
                            <!--Title-->
                            <div class="form-group">
                                <input type="text" class="form-control entry" id="p_title" placeholder="Project Title">
                            </div>
    
                            <!--Time-->
                            <div class="row">
                                <div class='col-sm-6'>
                                    <div class="form-group">
                                        <label for="p_start_time">Start Time</label>
                                        <div class='input-group date' id='datetimepickerPS'>
                                            <input id="pst" type='text' class="form-control entry" id="p_start_time"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-time"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#datetimepickerPS').datetimepicker({
                                            format: 'LT'
                                        });
                                    });
                                </script>
                                <div class='col-sm-6'>
                                    <div class="form-group">
                                        <label for="p_end_time">End Time</label>
                                        <div class='input-group date' id='datetimepickerPE'>
                                            <input id="pet" type='text' class="form-control entry" id="p_end_time"/>
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-time"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#datetimepickerPE').datetimepicker({
                                            format: 'LT'
                                        });
                                    });
                                </script>
                            </div>
    
                            <!--Date Input-->
                            <div class="row">
                                <div class='col-md-6'>
                                    <div class="form-group">
                                        <label for="p_date">Start Date</label>
                                        <div class='input-group date' id='p_date'>
                                            <input id="pd" type='text' class="form-control entry" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <script type="text/javascript">
                                    $(function () {
                                        $('#p_date').datetimepicker({
                                            format: "MM/DD/YYYY"
                                        });
                                    });
                                </script>
                            </div>
                            
                            <!--Description-->
                            <div class="form-group">
                                <label for="p_desc">Project Description</label>
                                <textarea class="form-control entry" id="p_desc" rows="3"></textarea>
                            </div>
                        </div>
    
                        <!--Cancel and submit buttons-->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearAllEntries()">Cancel</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="createCalendarProject()">Create Project</button>
                        </div>
                    </div>
                </div>
            </div>
    
            <!--Event Creation Fail Modal-->
            <div id="eventCreationFail" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Failed to create event</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>One or more of the required entries for event creation was incomplete.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
                    </div>
                    </div>
                </div>
            </div>

            <!--Project Creation Fail Modal-->
            <div id="projectCreationFail" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Failed to create project</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>One or more of the required entries for project creation was incomplete.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var user = new User();
            getAllEvents();
            getAllProjects();
            console.log(user);
        </script>
    </body>
</html>